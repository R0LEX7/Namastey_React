{"version":3,"sources":["Components/Pages/MenuItems.js"],"names":["_react","_interopRequireWildcard","require","_ai","_config","_dummy","_interopRequireDefault","_app","_database","_auth","_Snackbar","_SnackbarAlert","_firebaseConfig","_CartContext","_reactShimmer","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","r","l","t","Symbol","iterator","e","u","a","f","next","done","push","value","return","isArray","MenuItems","props","_ratings$aggregatedRa","cartItems","useContext","CartContext","_props$menuItem","menuItem","description","price","category","imageId","isVeg","inStock","ratings","newRating","aggregatedRating","rating","newPrice","_useState2","useState","open","setOpen","_useState4","alertSeverity","setAlertSeverity","_useState6","alertMessage","setAlertMessage","handleClick","severity","message","handleClose","event","reason","_useState8","user","setUser","useEffect","onAuthStateChanged","auth","createElement","Fragment","className","Image","src","ITEM_IMG_CDN_URL","dummyImg","alt","fallback","Shimmer","width","height","fadeIn","AiFillStar","onClick","filter","item","toLowerCase","includes","isItemAlreadyAdded","db","getDatabase","newItem","quantity","cartRef","ref","concat","uid","error","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","Alert","sx","_default","exports"],"mappings":";;;AAyJwB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAzJxB,IAAAA,EAAAC,EAAAC,QAAA,UACAC,EAAAD,QAAA,kBACAE,EAAAF,QAAA,uBACAG,EAAAC,EAAAJ,QAAA,kCAEAK,EAAAD,EAAAJ,QAAA,iBACAM,EAAAN,QAAA,qBACAO,EAAAP,QAAA,iBACAQ,EAAAJ,EAAAJ,QAAA,2BACAS,EAAAT,QAAA,8BACAU,EAAAV,QAAA,gCACAW,EAAAP,EAAAJ,QAAA,8BACAY,EAAAZ,QAAA,iBAA0D,SAAAI,EAAAS,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,GAAA,SAAAG,EAAAC,GAAAC,GAAAC,mBAAAD,QAAAC,OAAAA,KAAAA,IAAAA,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,QAAAF,OAAAA,EAAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,GAAA,SAAAlB,EAAAc,EAAAI,GAAAA,IAAAA,GAAAJ,GAAAA,EAAAC,WAAAD,OAAAA,EAAAA,GAAAA,OAAAA,GAAAA,iBAAAA,GAAAE,mBAAAF,EAAAE,MAAAA,CAAAA,QAAAF,GAAAQ,IAAAA,EAAAL,EAAAC,GAAAI,GAAAA,GAAAA,EAAAC,IAAAT,GAAAQ,OAAAA,EAAAE,IAAAV,GAAAW,IAAAA,EAAAC,GAAAA,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAAC,IAAAA,IAAAA,KAAAhB,EAAAgB,GAAAH,YAAAG,GAAAH,OAAAI,UAAAC,eAAAC,KAAAnB,EAAAgB,GAAAI,CAAAA,IAAAA,EAAAR,EAAAC,OAAAE,yBAAAf,EAAAgB,GAAAI,KAAAA,IAAAA,EAAAV,KAAAU,EAAAC,KAAAR,OAAAC,eAAAH,EAAAK,EAAAI,GAAAT,EAAAK,GAAAhB,EAAAgB,GAAAL,OAAAA,EAAAT,QAAAF,EAAAQ,GAAAA,EAAAa,IAAArB,EAAAW,GAAAA,EAAA,SAAAW,EAAAC,EAAAC,GAAAC,OAAAA,EAAAF,IAAAG,EAAAH,EAAAC,IAAAG,EAAAJ,EAAAC,IAAAI,IAAA,SAAAA,IAAAC,MAAAA,IAAAA,UAAA,6IAAA,SAAAF,EAAAG,EAAAC,GAAAD,GAAAA,EAAAA,CAAAA,GAAAE,iBAAAF,EAAAE,OAAAA,EAAAF,EAAAC,GAAAE,IAAAA,EAAApB,OAAAI,UAAAiB,SAAAf,KAAAW,GAAAK,MAAAF,GAAAA,GAAAA,MAAAH,WAAAG,GAAAH,EAAAM,cAAAH,EAAAH,EAAAM,YAAAC,MAAAJ,QAAAA,GAAAK,QAAAL,EAAAK,MAAAC,KAAAT,GAAAU,cAAAP,GAAAO,2CAAAA,KAAAP,GAAAD,EAAAF,EAAAC,QAAAE,GAAA,SAAAD,EAAAT,EAAAkB,IAAAA,MAAAA,GAAAA,EAAAlB,EAAAmB,UAAAD,EAAAlB,EAAAmB,QAAAlB,IAAAA,IAAAA,EAAAmB,EAAAA,EAAAL,IAAAA,MAAAG,GAAAjB,EAAAiB,EAAAjB,IAAAmB,EAAAnB,GAAAD,EAAAC,GAAAmB,OAAAA,EAAA,SAAAjB,EAAAkB,EAAAC,GAAAC,IAAAA,EAAAF,MAAAA,EAAAG,KAAAA,oBAAAA,QAAAH,EAAAG,OAAAC,WAAAJ,EAAAE,cAAAA,GAAAA,MAAAA,EAAAG,CAAAA,IAAAA,EAAAhB,EAAAT,EAAA0B,EAAAC,EAAAC,GAAAA,GAAAtB,EAAAA,GAAAN,EAAAA,IAAAA,GAAAA,GAAAsB,EAAAA,EAAA3B,KAAAyB,IAAAS,KAAAR,IAAAA,EAAAhC,CAAAA,GAAAA,OAAAiC,KAAAA,EAAAM,OAAAA,GAAAA,OAAAA,OAAAA,GAAAH,EAAAzB,EAAAL,KAAA2B,IAAAQ,QAAAH,EAAAI,KAAAN,EAAAO,OAAAL,EAAAT,SAAAG,GAAAO,GAAAR,IAAAA,MAAAA,GAAAd,GAAAG,EAAAA,EAAAW,EAAAQ,QAAAA,IAAAA,IAAAA,GAAAN,MAAAA,EAAAW,SAAAP,EAAAJ,EAAAW,SAAA5C,OAAAqC,KAAAA,GAAApB,OAAAA,QAAAA,GAAAA,EAAAG,MAAAA,GAAAkB,OAAAA,GAAA,SAAA1B,EAAAF,GAAAe,GAAAA,MAAAoB,QAAAnC,GAAAA,OAAAA,EAG1D,IAAMoC,EAAY,SAACC,GAAU,IAAAC,EACnBC,GAAc,EAAAC,EAAU,YAACC,EAAW,SAApCF,UAYRG,EASIL,EAAMM,SARR7B,EAAI4B,EAAJ5B,KACA8B,EAAWF,EAAXE,YACAC,EAAKH,EAALG,MACAC,EAAQJ,EAARI,SACAC,EAAOL,EAAPK,QAEAC,GADON,EAAPO,QACKP,EAALM,OACAE,EAAOR,EAAPQ,QAEIC,EAAYD,MAAAA,GAAyBZ,QAAlBA,EAAPY,EAASE,wBAATd,IAAyBA,OAAzBA,EAAAA,EAA2Be,OACvCC,EAAWT,EAAQ,IAGcU,EAAAxD,GAAf,EAAAyD,EAAQ,WAAC,GAAM,GAAhCC,EAAIF,EAAA,GAAEG,EAAOH,EAAA,GACyCI,EAAA5D,GAAnB,EAAAyD,EAAQ,UAAC,WAAU,GAAtDI,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GACcG,EAAA/D,GAAZ,EAAAyD,EAAQ,UAAC,IAAG,GAA7CO,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAE9BG,EAAc,SAACC,EAAUC,GAC7BN,EAAiBK,GACjBF,EAAgBG,GAChBT,GAAQ,IAGJU,EAAc,SAACC,EAAOC,GACX,cAAXA,GAIJZ,GAAQ,IAK4Ba,EAAAxE,GAAd,EAAAyD,EAAQ,UAAC,MAAK,GAA/BgB,EAAID,EAAA,GAAEE,EAAOF,EAAA,IAEpB,EAAAG,EAAS,WAAC,YACR,EAAAC,EAAkB,oBAACC,EAAI,KAAE,SAACJ,GAEtBC,EADED,GAGM,SAGX,IAoCH,OACE9G,EAAAiB,QAAAkG,cAAAnH,EAAAiB,QAAAmG,SACEpH,KAAAA,EAAAiB,QAAAkG,cAAA,MAAA,CAAKE,UAAU,aACbrH,EAAAiB,QAAAkG,cAACrG,EAAAwG,MAAK,CACJC,IAAKlC,EAAUmC,EAAgB,iBAAGnC,EAAUoC,EAAS,QACrDC,IAAKrC,EACLsC,SAAU3H,EAAAiB,QAAAkG,cAACrG,EAAA8G,QAAO,CAACC,MAAO,IAAKC,OAAQ,MAASC,QAAU,IAE5D/H,EAAAiB,QAAAkG,cAAA,MAAA,CAAKE,UAAU,QACbrH,EAAAiB,QAAAkG,cAAK/D,KAAAA,KAAAA,GACLpD,EAAAiB,QAAAkG,cAAKjC,KAAAA,KAAAA,GACLlF,EAAAiB,QAAAkG,cAAA,MAAA,CAAKE,UAAU,WACbrH,EAAAiB,QAAAkG,cAAI,KAAA,KAAA,cACJnH,EAAAiB,QAAAkG,cAAK7B,KAAAA,KAAAA,EAAQ,QAAU,aACvBtF,EAAAiB,QAAAkG,cAAK/B,KAAAA,KAAAA,IAEPpF,EAAAiB,QAAAkG,cAAA,MAAA,CAAKE,UAAU,WACbrH,EAAAiB,QAAAkG,cAAA,OAAA,CAAME,UAAW5B,EAAY,IAAM,QAAU,OAC3CzF,EAAAiB,QAAAkG,cAAChH,EAAA6H,WAAY,MACZvC,GAAwB,MAE3BzF,EAAAiB,QAAAkG,cAAI,KAAA,KAAA,IAAEhC,EAAQ,IAAMS,EAAW,MAAQ,iBAEtCT,GAASnF,EAAAiB,QAAAkG,cAAA,SAAA,CAASc,QAzDP,WACpB,GAAa,OAATnB,EAIF,GA7DuB,SAAC1D,GAO1B,OAJsByB,EAAUqD,OAAO,SAACC,GAAI,OAC1CA,MAAAA,OAAAA,EAAAA,EAAM/E,KAAKgF,cAAcC,SAASjF,EAAKgF,iBAGpB3E,OAAS,EAsDzB6E,CAAmBlF,GACpBmD,EAAY,UAAW,mCADzB,CAIA,IAAMgC,GAAK,EAAAC,EAAW,eAChBC,EAAU,CACdrF,KAAMA,EACN+B,MAAOS,EACP8C,SAAU,EACV/C,OAAQH,GAAW,EACnBH,QAASA,GAAW,GACpBC,MAAOA,IAAS,GAGZqD,GAAU,EAAAC,EAAG,KAACL,EAAEM,SAAAA,OAAW/B,EAAKgC,IAAM,MAE5C,KAEqB,EAAAxE,EAAI,MAACqE,EAASF,GACjClC,EAAY,UAAW,mCACvB,MAAOwC,GACPxC,EACE,QACA,6DA1BJA,EAAY,OAAQ,kCAuD6B,UAG/CvG,EAAAiB,QAAAkG,cAACzG,EAAAO,QAAQ,CACP8E,KAAMA,EACNiD,iBAAkB,IAClBC,QAASvC,EACTwC,aAAc,CAAEC,SAAU,MAAOC,WAAY,WAE7CpJ,EAAAiB,QAAAkG,cAACxG,EAAA0I,MAAK,CACJJ,QAASvC,EACTF,SAAUN,EACVoD,GAAI,CAAEzB,MAAO,SAEZxB,OAMXkD,EAEa7E,EAAS8E,QAAAvI,QAAAsI","file":"MenuItems.bcc1dcf4.js","sourceRoot":"..","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { AiFillStar } from \"react-icons/ai\";\r\nimport { ITEM_IMG_CDN_URL } from \"../../Config/config\";\r\nimport dummyImg from \"../../assets/images/dummy.png\";\r\n// import userContext from \"./utils/userContext\";\r\nimport firebase from \"firebase/app\";\r\nimport { getDatabase, ref, set, push } from \"firebase/database\";\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\nimport Snackbar from \"@mui/material/Snackbar\";\r\nimport { Alert } from \"../../Alerts/SnackbarAlert\";\r\nimport { auth } from \"../../Config/firebase-config\";\r\nimport CartContext from \"../../Context/CartContext\";\r\nimport { Image, Shimmer , Breathing } from 'react-shimmer'\r\n\r\n\r\nconst MenuItems = (props) => {\r\n  const { cartItems } = useContext(CartContext);\r\n\r\n  const isItemAlreadyAdded = (name) => {\r\n    console.log(\"cartItems:\", cartItems);\r\n\r\n    const matchingItems = cartItems.filter((item) =>\r\n      item?.name.toLowerCase().includes(name.toLowerCase())\r\n    );\r\n    console.log(matchingItems);\r\n    return matchingItems.length > 0;\r\n  };\r\n\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    category,\r\n    imageId,\r\n    inStock,\r\n    isVeg,\r\n    ratings,\r\n  } = props.menuItem;\r\n  const newRating = ratings?.aggregatedRating?.rating;\r\n  const newPrice = price / 100;\r\n\r\n  /* setting toast */\r\n  const [open, setOpen] = useState(false);\r\n  const [alertSeverity, setAlertSeverity] = useState(\"success\");\r\n  const [alertMessage, setAlertMessage] = useState(\"\");\r\n\r\n  const handleClick = (severity, message) => {\r\n    setAlertSeverity(severity);\r\n    setAlertMessage(message);\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = (event, reason) => {\r\n    if (reason === \"clickaway\") {\r\n      return;\r\n    }\r\n\r\n    setOpen(false);\r\n  };\r\n\r\n  /* setting user */\r\n\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    onAuthStateChanged(auth, (user) => {\r\n      if (user) {\r\n        setUser(user);\r\n      } else {\r\n        setUser(null);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const addItemToCart = () => {\r\n    if (user === null) {\r\n      handleClick(\"info\", \"Please Login for add to cart\");\r\n      return;\r\n    } else {\r\n      if(isItemAlreadyAdded(name)){\r\n        handleClick(\"warning\", \"Item already added to cart;\");\r\n        return;\r\n      }\r\n      const db = getDatabase();\r\n      const newItem = {\r\n        name: name,\r\n        price: newPrice,\r\n        quantity: 1,\r\n        rating: ratings || 0,\r\n        imageId: imageId || \"\",\r\n        isVeg: isVeg || false,\r\n      };\r\n      \r\n      const cartRef = ref(db, `carts/${user.uid}/`);\r\n\r\n      try {\r\n        // Use push to add a new item to the user's cart\r\n        const newItemRef = push(cartRef, newItem);\r\n        handleClick(\"success\", \"Item added to cart successfully\");\r\n      } catch (error) {\r\n        handleClick(\r\n          \"error\",\r\n          \"An error occurred while adding the item to the cart\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"menu-Card\">\r\n        <Image\r\n          src={imageId ? ITEM_IMG_CDN_URL + imageId : dummyImg}\r\n          alt={imageId}\r\n          fallback={<Shimmer width={210} height={120} />} fadeIn = {true}\r\n        />\r\n        <div className=\"flex\">\r\n          <h3>{name}</h3>\r\n          <h5>{description}</h5>\r\n          <div className=\"details\">\r\n            <h4>Category: </h4>\r\n            <h4>{isVeg ? \"🟢Veg\" : \"🔴Non-Veg\"}</h4>\r\n            <h4>{category}</h4>\r\n          </div>\r\n          <div className=\"details\">\r\n            <span className={newRating > 3.8 ? \"green\" : \"red\"}>\r\n              <AiFillStar />\r\n              {newRating ? newRating : \"NA\"}\r\n            </span>\r\n            <h3> {price ? \"₹\" + newPrice + \".00\" : \"Not available\"}</h3>\r\n            {/* {console.log(isItemAlreadyAdded())} */}\r\n            {price && <button  onClick={addItemToCart}> Add</button>}\r\n          </div>\r\n        </div>\r\n        <Snackbar\r\n          open={open}\r\n          autoHideDuration={3000}\r\n          onClose={handleClose}\r\n          anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n        >\r\n          <Alert\r\n            onClose={handleClose}\r\n            severity={alertSeverity}\r\n            sx={{ width: \"100%\" }}\r\n          >\r\n            {alertMessage}\r\n          </Alert>\r\n        </Snackbar>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MenuItems;\r\n"]}